{"version":3,"file":"js/6769.b3b7480a.js","mappings":"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","sources":["webpack://aw-webui/./src/views/Report.vue","webpack://aw-webui/./src/views/Report.vue?eeed","webpack://aw-webui/./src/views/Report.vue?88e4","webpack://aw-webui/./src/util/datasets.ts","webpack://aw-webui/./src/util/transforms.ts","webpack://aw-webui/./node_modules/vue-awesome/icons/angle-double-down.js","webpack://aw-webui/./node_modules/vue-awesome/icons/angle-double-up.js","webpack://aw-webui/./node_modules/vue-awesome/icons/search.js","webpack://aw-webui/./node_modules/vue-awesome/icons/spinner.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('h3',[_vm._v(\"Report\")]),_vm._v(\"Generate a report of time spent on a certain category of device activity.\"),_c('b-alert',{staticClass:\"mt-2\",staticStyle:{},attrs:{\"show\":\"\"}},[_vm._v(\"This feature is still in early development.\")]),(_vm.error)?_c('b-alert',{attrs:{\"show\":\"\",\"variant\":\"danger\"}},[_vm._v(_vm._s(_vm.error))]):_vm._e(),_c('aw-select-categories-or-pattern',{scopedSlots:_vm._u([{key:\"input-group-append\",fn:function(){return [_c('b-button',{attrs:{\"type\":\"button\",\"variant\":\"success\",\"disabled\":!_vm.has_pattern},on:{\"click\":function($event){return _vm.generate()}}},[_c('icon',{attrs:{\"name\":\"search\"}}),_vm._v(\"Generate\")],1)]},proxy:true}]),model:{value:(_vm.filterCategories),callback:function ($$v) {_vm.filterCategories=$$v},expression:\"filterCategories\"}}),_c('div',{staticClass:\"d-flex mt-1\"},[_c('span',{staticClass:\"mr-auto small\",staticStyle:{\"color\":\"#666\"}},[_vm._v(\"Hostname: \"+_vm._s(_vm.queryOptions.hostname))]),_c('b-button',{staticClass:\"border-0\",attrs:{\"size\":\"sm\",\"variant\":\"outline-dark\"},on:{\"click\":function($event){_vm.show_options = !_vm.show_options}}},[(!_vm.show_options)?_c('span',[_c('icon',{attrs:{\"name\":\"angle-double-down\"}}),_vm._v(\" Show options\")],1):_c('span',[_c('icon',{attrs:{\"name\":\"angle-double-up\"}}),_vm._v(\" Hide options\")],1)])],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.show_options),expression:\"show_options\"}]},[_c('h4',[_vm._v(\"Options\")]),_c('aw-query-options',{model:{value:(_vm.queryOptions),callback:function ($$v) {_vm.queryOptions=$$v},expression:\"queryOptions\"}})],1),(_vm.status == 'searching')?_c('div',[_c('div',[_c('icon',{attrs:{\"name\":\"spinner\",\"pulse\":\"\"}}),_vm._v(\" Searching...\")],1)]):_vm._e(),(_vm.events != null)?_c('div',[_c('hr'),_c('div',{staticClass:\"d-flex\"},[_c('div',{staticClass:\"flex-fill\"},[_vm._v(\"Found \"+_vm._s(_vm.events.length)+\" events in \"+_vm._s(_vm.queryTime / 1000)+\" seconds\")]),_c('div',[_c('b-input-group',{attrs:{\"size\":\"sm\"}},[_c('b-input-group-prepend',[_c('b-input-group-text',[_c('icon',{attrs:{\"name\":\"save\"}}),_c('div',{staticClass:\"mx-1\"},[_vm._v(\"Export as:\")])],1)],1),_c('b-input-group-append',[_c('b-button',{attrs:{\"type\":\"button\",\"variant\":\"outline-dark\"},on:{\"click\":function($event){return _vm.export_csv()}}},[_vm._v(\"CSV\")]),_c('b-button',{attrs:{\"type\":\"button\",\"variant\":\"outline-dark\"},on:{\"click\":function($event){return _vm.export_json()}}},[_vm._v(\"JSON\")])],1)],1)],1)]),_c('hr'),_c('vis-timeline',{attrs:{\"events\":_vm.events.slice(0, 500),\"filterShortEvents\":\"\"}}),(_vm.events.length > 500)?_c('div',{staticClass:\"small\"},[_vm._v(\"Too many events, will only show last 500 events.\")]):_vm._e(),_c('hr'),_c('aw-timeline-barchart',{attrs:{\"datasets\":_vm.datasets,\"height\":100}}),_c('hr'),_c('aw-selectable-eventview',{attrs:{\"events\":_vm.events}}),_c('hr'),_c('hr'),_c('div',[_vm._v(\"Didn't find what you were looking for?\"),_c('br'),_vm._v(\"Add a week to the search: \"),_c('b-button',{attrs:{\"size\":\"sm\",\"variant\":\"outline-dark\"},on:{\"click\":function($event){_vm.start = _vm.start.subtract(1, 'week'); _vm.search()}}},[_vm._v(\"+1 week\")])],1)],1):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/@vue/cli-plugin-typescript/node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-38.use[2]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Report.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/@vue/cli-plugin-typescript/node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-38.use[2]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Report.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./Report.vue?vue&type=template&id=acd3f93e&scoped=true&lang=pug\"\nimport script from \"./Report.vue?vue&type=script&lang=ts\"\nexport * from \"./Report.vue?vue&type=script&lang=ts\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"acd3f93e\",\n  null\n  \n)\n\nexport default component.exports","import _ from 'lodash';\nimport { split_by_hour_into_data } from '~/util/transforms';\nimport { getColorFromCategory } from '~/util/color';\nimport { useCategoryStore } from '~/stores/categories';\nexport function buildBarchartDataset(data_by_hour, classes) {\n    const SEP = '>>>';\n    const data = data_by_hour;\n    if (data) {\n        const category_names = new Set(Object.values(data)\n            .map(result => {\n            return result.cat_events.map(e => e.data['$category'].join(SEP));\n        })\n            .flat());\n        const ds = [...category_names]\n            .map(c_ => {\n            const categoryStore = useCategoryStore();\n            const c = categoryStore.get_category(c_.split(SEP));\n            if (c) {\n                const values = Object.values(data).map(results => {\n                    const cat = results.cat_events.find(e => _.isEqual(e.data['$category'], c.name));\n                    if (cat)\n                        return Math.round((cat.duration / (60 * 60)) * 1000) / 1000;\n                    else\n                        return null;\n                });\n                return {\n                    label: c.name.join(' > '),\n                    backgroundColor: getColorFromCategory(c, classes),\n                    data: values,\n                };\n            }\n            else {\n                // FIXME: This shouldn't happen\n                // This may for example happen if one doesn't have an 'Uncategorized' category,\n                // as can happen when one upgrades from an old version where there wasn't one in the default classes.\n                console.error('missing category:', c_);\n            }\n        })\n            .filter(x => x);\n        return ds;\n    }\n    else {\n        return [];\n    }\n}\nexport function buildBarchartDatasetActive(events_active) {\n    const data = split_by_hour_into_data(events_active);\n    return [\n        {\n            label: 'Total time',\n            backgroundColor: '#6699ff',\n            data,\n        },\n    ];\n}\n","import _ from 'lodash';\nimport moment from 'moment';\nimport { get_hour_offset } from '~/util/time';\n// TODO: Move somewhere else, possibly turn into a serverside transform\nexport function split_by_hour_into_data(events) {\n    if (events === undefined || events === null || events.length == 0)\n        return [];\n    const d = moment(events[0].timestamp).startOf('day');\n    const hoursOffset = get_hour_offset();\n    return _.range(0, 24).map(h => {\n        h += hoursOffset;\n        let duration = 0;\n        const d_start = d.clone().hour(h);\n        const d_end = d.clone().hour(h + 1);\n        // This can be made faster by not checking every event per hour, but since number of events is small anyway this and this is a lot shorter and easier to read it doesn't really matter.\n        events.map(e => {\n            const e_start = moment(e.timestamp);\n            const e_end = e_start.clone().add(e.duration, 'seconds');\n            if (e_start.isBetween(d_start, d_end) ||\n                e_end.isBetween(d_start, d_end) ||\n                d_start.isBetween(e_start, e_end)) {\n                if (d_start < e_start && e_end < d_end) {\n                    // If entire event is contained within the hour\n                    duration += e.duration;\n                }\n                else if (d_start < e_start) {\n                    // If start of event is within the hour, but not the end\n                    duration += (d_end.valueOf() - e_start.valueOf()) / 1000;\n                }\n                else if (e_end < d_end) {\n                    // If end of event is within the hour, but not the start\n                    duration += (e_end.valueOf() - d_start.valueOf()) / 1000;\n                }\n                else {\n                    // Happens if event covers entire hour and more\n                    duration += 3600;\n                }\n            }\n        });\n        return duration / 60 / 60;\n    });\n}\nexport function overlappingEvents(events1, events2) {\n    events1 = events1.sort((a, b) => a.timestamp - b.timestamp);\n    events2 = events2.sort((a, b) => a.timestamp - b.timestamp);\n    let i = 0;\n    let j = 0;\n    const overlapping = [];\n    while (i < events1.length && j < events2.length) {\n        const e1 = events1[i];\n        const e2 = events2[j];\n        // If `events1` and `events2` are the same list, we need to check if we are comparing the same event\n        if (events1 === events2 && e1 === e2) {\n            i++;\n            continue;\n        }\n        const e1_start = new Date(e1.timestamp);\n        const e2_start = new Date(e2.timestamp);\n        const e1_end = new Date(new Date(e1.timestamp).valueOf() + 1000 * e1.duration);\n        const e2_end = new Date(new Date(e2.timestamp).valueOf() + 1000 * e2.duration);\n        // Check for overlap\n        if (\n        // `e2.start` is within `e1`\n        (e1_start < e2_start && e2_start < e1_end) ||\n            // `e2.end` is within `e1`\n            (e1_start < e2_end && e2_end <= e1_end)) {\n            const overlap1 = {\n                start: e1_start,\n                end: e1_end,\n                event: e1,\n            };\n            const overlap2 = {\n                start: e2_start,\n                end: e2_end,\n                event: e2,\n            };\n            overlapping.push([overlap1, overlap2]);\n        }\n        // If `e2` ends after `e1`, advance `i`\n        if (e2.timestamp + 1000 * e2.duration > e1.timestamp + 1000 * e1.duration) {\n            i++;\n        }\n        else {\n            // Otherwise, advance `j`\n            j++;\n        }\n    }\n    if (overlapping.length > 0) {\n        console.warn('Overlapping events found', overlapping);\n    }\n    return overlapping;\n}\n","import Icon from '../components/Icon.vue'\n\nIcon.register({\n  'angle-double-down': {\n    width: 320,\n    height: 512,\n    paths: [\n      {\n        d: 'M143 256.3l-136-136c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.8 22.5c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.4 9.5-24.6 9.5-34 0.1zM177 448.3c-9.4 9.4-24.6 9.4-34-0.1l-136-136c-9.4-9.3-9.4-24.5 0-33.9l22.7-22.6c9.3-9.4 24.5-9.4 33.9 0l96.4 96.4 96.5-96.3c9.3-9.4 24.5-9.4 33.9 0l22.6 22.6c9.4 9.3 9.4 24.5 0 33.9z'\n      }\n    ]\n  }\n})\n","import Icon from '../components/Icon.vue'\n\nIcon.register({\n  'angle-double-up': {\n    width: 320,\n    height: 512,\n    paths: [\n      {\n        d: 'M177 255.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0l-96.5-96.3-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0l-22.7-22.6c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-0.1zM143 63.7c9.4-9.4 24.6-9.4 33.8 0l136 136c9.4 9.3 9.4 24.5 0 33.9l-22.6 22.6c-9.3 9.4-24.5 9.4-33.9 0l-96.4-96.4-96.4 96.4c-9.3 9.4-24.5 9.4-33.9 0l-22.6-22.6c-9.4-9.3-9.4-24.5 0-33.9z'\n      }\n    ]\n  }\n})\n","import Icon from '../components/Icon.vue'\n\nIcon.register({\n  search: {\n    width: 512,\n    height: 512,\n    paths: [\n      {\n        d: 'M505 442.7c9.3 9.4 9.3 24.6-0.1 34l-28.3 28.3c-9.3 9.4-24.5 9.4-33.9 0l-99.7-99.7c-4.5-4.5-7-10.6-7-17v-16.3c-35.3 27.6-79.7 44-128 44-114.9 0-208-93.1-208-208s93.1-208 208-208 208 93.1 208 208c0 48.3-16.4 92.7-44 128h16.3c6.4 0 12.5 2.5 17 7zM208 336c70.8 0 128-57.3 128-128 0-70.8-57.3-128-128-128-70.8 0-128 57.3-128 128 0 70.8 57.3 128 128 128z'\n      }\n    ]\n  }\n})\n","import Icon from '../components/Icon.vue'\n\nIcon.register({\n  spinner: {\n    width: 512,\n    height: 512,\n    paths: [\n      {\n        d: 'M304 48c0 26.5-21.5 48-48 48s-48-21.5-48-48 21.5-48 48-48 48 21.5 48 48zM256 416c26.5 0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48 21.5-48 48-48zM464 208c26.5 0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48 21.5-48 48-48zM96 256c0 26.5-21.5 48-48 48s-48-21.5-48-48 21.5-48 48-48 48 21.5 48 48zM108.9 355.1c26.5 0 48 21.5 48 48 0 26.5-21.5 48-48 48s-48-21.5-48-48 21.5-48 48-48zM403.1 355.1c26.5 0 48 21.5 48 48 0 26.5-21.5 48-48 48s-48-21.5-48-48 21.5-48 48-48zM108.9 60.9c26.5 0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48 21.5-48 48-48z'\n      }\n    ]\n  }\n})\n"],"names":["render","_vm","this","_c","_self","_v","staticClass","staticStyle","attrs","error","_s","_e","scopedSlots","_u","key","fn","has_pattern","on","$event","generate","proxy","model","value","filterCategories","callback","$$v","expression","queryOptions","hostname","show_options","directives","name","rawName","status","events","length","queryTime","export_csv","export_json","slice","datasets","start","subtract","search","staticRenderFns","data","activityStore","useActivityStore","categoryStore","useCategoryStore","bucketsStore","useBucketsStore","computed","buildBarchartDataset","category","by_period","classes","mounted","_mounted","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","ensureLoaded","stop","apply","arguments","methods","_generate","_callee2","query","query_array","end","timeperiods","time","_context2","canonicalEvents","bid_window","bid_afk","filter_afk","categories","filter_categories","map","c","split","s","trim","moment","format","getClient","sent","_orderBy","diff","t0","console","response","message","finish","JSON","stringify","blob","Blob","type","url","URL","createObjectURL","link","document","createElement","href","download","body","appendChild","click","removeChild","e","timestamp","duration","csv","Papa","columns","component","data_by_hour","SEP","category_names","Set","Object","values","result","cat_events","join","flat","ds","_toConsumableArray","c_","get_category","results","cat","find","_isEqual","Math","round","label","backgroundColor","getColorFromCategory","filter","x","overlappingEvents","events1","events2","sort","a","b","i","j","overlapping","e1","e2","e1_start","Date","e2_start","e1_end","valueOf","e2_end","overlap1","event","overlap2","push","warn","register","width","height","paths","d","spinner"],"sourceRoot":""}